# Due to the length of the code and HTML logic involved, we’ll first break it into manageable sections and insert features step by step.

# Let's generate the updated JavaScript and HTML logic to support:

# 1. One question at a time.

# 2. A 2-minute countdown per question.

# 3. Auto-next on timeout.

# 4. Locked unanswered question if time expires.



# Here's the modified HTML+JavaScript block:



updated_code = """

<!DOCTYPE html>

<html lang="ar" dir="rtl">

<head>

  <meta charset="UTF-8">

  <title>اختبار بريد الجزائر - الجانب المالي والإداري</title>

  <style>

    body {

      font-family: 'arial', sans-serif;

      background-color: #fff;

      direction: rtl;

    }

    .question {

      display: none;

      border: 2px solid #004a99;

      padding: 20px;

      margin: 20px auto;

      border-radius: 10px;

      width: 90%;

      box-shadow: 0 0 10px #ccc;

    }

    .active {

      display: block;

    }

    button {

      padding: 10px 20px;

      font-size: 18px;

      margin: 10px;

    }

    #timer {

      font-size: 20px;

      color: red;

      font-weight: bold;

      text-align: center;

    }

  </style>

</head>

<body>



<h1 style="text-align: center;">اختبار بريد الجزائر</h1>

<div id="timer">الوقت المتبقي: 120 ثانية</div>

<div id="quiz"></div>

<div style="text-align: center;">

  <button onclick="prevQuestion()">السابق</button>

  <button onclick="nextQuestion()">التالي</button>

</div>

<div id="result" style="text-align:center; font-size: 24px; margin-top: 20px;"></div>



<script>

const questions = [];

function addQuestion(q, options, correct) {

  questions.push({ q, options, correct, answered: false, locked: false, timeLeft: 120 });

}



// Add sample questions (for demo)

addQuestion("ما هي الوثائق المطلوبة لفتح حساب بريدي جاري؟", ["نسخة من شهادة الميلاد", "الوثيقة CH1 + نسخة من بطاقة الهوية", "بطاقة إقامة", "شهادة عمل"], 1);

addQuestion("ما هو الحد الأقصى اليومي للتحويل؟", ["20,000 دج", "30,000 دج", "50,000 دج", "100,000 دج"], 2);



let currentIndex = 0;

let timerInterval;



const quizDiv = document.getElementById("quiz");

questions.forEach((q, i) => {

  const div = document.createElement("div");

  div.className = "question";

  div.id = "question-" + i;

  div.innerHTML = `<h3>س${i + 1}: ${q.q}</h3>` +

    q.options.map((opt, j) => `

      <label>

        <input type="radio" name="q${i}" value="${j}" onclick="markAnswered(${i})"> ${opt}

      </label><br>`).join("");

  quizDiv.appendChild(div);

});



function markAnswered(i) {

  if (!questions[i].locked) {

    questions[i].answered = true;

  }

}



function showQuestion(i) {

  document.querySelectorAll(".question").forEach(div => div.classList.remove("active"));

  document.getElementById("question-" + i).classList.add("active");

  startTimer(i);

}



function startTimer(i) {

  clearInterval(timerInterval);

  const timerDiv = document.getElementById("timer");

  timerDiv.innerText = `الوقت المتبقي: ${questions[i].timeLeft} ثانية`;



  timerInterval = setInterval(() => {

    questions[i].timeLeft--;

    timerDiv.innerText = `الوقت المتبقي: ${questions[i].timeLeft} ثانية`;

    if (questions[i].timeLeft <= 0) {

      questions[i].locked = true;

      clearInterval(timerInterval);

      nextQuestion();

    }

  }, 1000);

}



function nextQuestion() {

  if (currentIndex < questions.length - 1) {

    currentIndex++;

    showQuestion(currentIndex);

  } else {

    clearInterval(timerInterval);

    showResult();

  }

}



function prevQuestion() {

  if (currentIndex > 0) {

    currentIndex--;

    showQuestion(currentIndex);

  }

}



function showResult() {

  let score = 0;

  questions.forEach((q, i) => {

    const selected = document.querySelector(`input[name="q${i}"]:checked`);

    if (selected && parseInt(selected.value) === q.correct) {

      score++;

    }

  });

  document.getElementById("result").innerText = `✔️ نتيجتك: ${score} من ${questions.length}`;

}



showQuestion(currentIndex);

</script>



</body>

</html>

"""



updated_code[:1000]  # Just showing a preview since it's long


